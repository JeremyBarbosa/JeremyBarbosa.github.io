{% extends "index.html" %}

{% block list %}
{% set itinerary = load_data(path="static/itineraries/paris/3day.json", format="json") %}

<div id="daypicker">
  {% for day in itinerary['schedule'] %}
  <!-- Try other elements, or perhaps sizing this better to get onDragEnter to work -->
  <a data-day="{{loop.index0}}">Day {{loop.index}}</a>
  {% endfor %}
</div>

{% for day in itinerary['schedule'] %}
  {% set currentDay = loop.index %}
  {% if currentDay == 1 %}
    <div data-day="{{currentDay}}" class="list">
  {% else %}
    <div data-day="{{currentDay}}" class="list" style="display: none;">
  {% endif %}
    {% for sites in day %}
      <!-- Don't put any state into listItem as they move around -->
      <div class="listItem" draggable="true">
        <div class="head">
          <h4>{{ sites[1] }}</h4>
          <h4 class="handle">&#x21f5;</h4>
        </div>
        <input type="time" class="begin" value="{{ sites[0] }}">
        &mdash;
        {% if day[loop.index] %}
          <input type="time" class="end" value="{{ day[loop.index][0] }}">
        {% else %}
          <input type="time" class="end" value="22:00">
        {% endif %}
        <p>A wrought-iron lattice tower on the Champ de Mars in Paris, France.</p>
      </div>
    {% endfor %}  
  </div>
{% endfor %}
{% endblock list %}